.test_file
hwk4.asm

.type
string asciiz la 4
char byte lbu 11
byte byte lb 1
int word lw 1
int[] word la 1
byte[] asciiz la 4
Hashtable word byte la 1
HashBookTable align word la 1 
HashSalesTable align word la 1 
getBookTable la 4
getSalesTable la 4
BookSale[] la 4
.end

.def
hash_book HashBookTable string -> int
get_book getBookTable string -> int int
add_book getBookTable string string string -> arg0:12:76:1:11: arg0:80:144:1:11: arg0:148:212:1:11: arg0:216:280:1:11: arg0:284:348:1:11: arg0:352:416:1:11: arg0:420:484:1:11: arg0:488:552:1:11: arg0:556:620:1:11: int int
delete_book getBookTable string -> arg0:12:76:1:11: arg0:80:144:1:11: arg0:148:212:1:11: arg0:216:280:1:11: arg0:284:348:1:11: arg0:352:416:1:11: arg0:420:484:1:11: int 
sell_book getSalesTable getBookTable string int string int -> arg0:12:26:1:11: arg0:40:54:1:11: arg0:68:82:1:11: arg0:96:110:1:11: arg0:124:138:1:11: arg0:152:166:1:11: arg0:180:194:1:11: arg0:208:222:1:11: arg0:236:250:1:11: int int
compute_scenario_revenue BookSale[] int int -> int 
.end

arg0:12:26:1:11: 
arg0:40:54:1:11:
arg0:68:82:1:11:
arg0:96:110:1:11:
arg0:124:138:1:11:
arg0:152:166:1:11:
arg0:180:194:1:11:
arg0:208:222:1:11:
arg0:236:250:1:11:

arg1:12:76:1:11: arg1:80:144:1:11: arg1:148:212:1:11: arg1:216:280:1:11: arg1:284:348:1:11: arg1:352:416:1:11: arg1:420:484:1:11:


.check_register
$s0 800
.check_register
$s1 801
.check_register
$s2 802
.check_register
$s3 803
.check_register
$s4 804
.check_register
$s5 805
.check_register
$s6 806
.check_register
$s7 807
.check_stack


.start_check

############################ PART 11
############################ PART 11
############################ PART 11

# 1: sales hash table is empty
sell_book
.align 2
.align 2
.word 9 0 28
# empty or deleted entry starts here
.align 2
.byte 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
# empty or deleted entry starts here
.align 2
.byte 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
# empty or deleted entry starts here
.align 2
.byte 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
# empty or deleted entry starts here
.align 2
.byte 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
# empty or deleted entry starts here
.align 2
.byte 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
# empty or deleted entry starts here
.align 2
.byte 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
# empty or deleted entry starts here
.align 2
.byte 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
# empty or deleted entry starts here
.align 2
.byte 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
# empty or deleted entry starts here
.align 2
.byte 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
.end_type
.align 2
.word 7 6 68
# Book struct start
.align 2
.ascii "9780345501330\0"
.ascii "Fairy Tail, Vol. 1 (Fair\0"
.ascii "Hiro Mashima, William Fl\0"
.word 0
# empty or deleted entry starts here
.align 2
.byte 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
# Book struct start
.align 2
.ascii "9780060855900\0"
.ascii "Equal Rites (Discworld, \0"
.ascii "Terry Pratchett\0\0\0\0\0\0\0\0\0\0"
.word 0
# Book struct start
.align 2
.ascii "9780670032080\0"
.ascii "Financial Peace Revisite\0"
.ascii "Dave Ramsey\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
.word 0
# Book struct start
.align 2
.ascii "9780064408330\0"
.ascii "Joey Pigza Swallowed the\0"
.ascii "Jack Gantos\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
.word 0
# Book struct start
.align 2
.ascii "9780312577220\0"
.ascii "Fly Away (Firefly Lane, \0"
.ascii "Kristin Hannah\0\0\0\0\0\0\0\0\0\0\0"
.word 0
# Book struct start
.align 2
.ascii "9781416971700\0"
.ascii "Out of My Mind\0\0\0\0\0\0\0\0\0\0\0"
.ascii "Sharon M. Draper\0\0\0\0\0\0\0\0\0"
.word 0
.end_type
"9780670032080"
12345
"2020-09-14"
50





9780670032080



5
1


# 2 sales hash table contains some entries; a few steps of linear probing required to insert the BookSale struct
sell_book
.align 2
.word 9 4 28
# empty or deleted entry starts here
.align 2
.byte 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
# BookSale struct start
.align 2
.ascii "9781416971700\0"
.byte 0 0
.word 2323432
.word 155033
.word 22
# BookSale struct start
.align 2
.ascii "9780060855900\0"
.byte 0 0
.word 920192
.word 158610
.word 61
# BookSale struct start
.align 2
.ascii "9780345501330\0"
.byte 0 0
.word 81321
.word 151269
.word 192
# empty or deleted entry starts here
.align 2
.byte 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
# BookSale struct start
.align 2
.ascii "9780312577220\0"
.byte 0 0
.word 2424
.word 151912
.word 125
# empty or deleted entry starts here
.align 2
.byte 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
# empty or deleted entry starts here
.align 2
.byte 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
# empty or deleted entry starts here
.align 2
.byte 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
.end_type
.align 2
.word 7 6 68
# Book struct start
.align 2
.ascii "9780345501330\0"
.ascii "Fairy Tail, Vol. 1 (Fair\0"
.ascii "Hiro Mashima, William Fl\0"
.word 1
# empty or deleted entry starts here
.align 2
.byte 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
# Book struct start
.align 2
.ascii "9780060855900\0"
.ascii "Equal Rites (Discworld, \0"
.ascii "Terry Pratchett\0\0\0\0\0\0\0\0\0\0"
.word 103
# Book struct start
.align 2
.ascii "9780670032080\0"
.ascii "Financial Peace Revisite\0"
.ascii "Dave Ramsey\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
.word 61
# Book struct start
.align 2
.ascii "9780064408330\0"
.ascii "Joey Pigza Swallowed the\0"
.ascii "Jack Gantos\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
.word 44
# Book struct start
.align 2
.ascii "9780312577220\0"
.ascii "Fly Away (Firefly Lane, \0"
.ascii "Kristin Hannah\0\0\0\0\0\0\0\0\0\0\0"
.word 812
# Book struct start
.align 2
.ascii "9781416971700\0"
.ascii "Out of My Mind\0\0\0\0\0\0\0\0\0\0\0"
.ascii "Sharon M. Draper\0\0\0\0\0\0\0\0\0"
.word 1
.end_type
"9780670032080"
6123
"2019-11-04"
1032

9781416971700
9780060855900
9780345501330
9780670032080
9780312577220



4
3


# provided ISBN does not exist in the books hash table
sell_book
.align 2
.word 9 4 28
# empty or deleted entry starts here
.align 2
.byte 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
# BookSale struct start
.align 2
.ascii "9781416971700\0"
.byte 0 0
.word 2323432
.word 155033
.word 22
# BookSale struct start
.align 2
.ascii "9780060855900\0"
.byte 0 0
.word 920192
.word 158610
.word 61
# BookSale struct start
.align 2
.ascii "9780345501330\0"
.byte 0 0
.word 81321
.word 151269
.word 192
# empty or deleted entry starts here
.align 2
.byte 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
# BookSale struct start
.align 2
.ascii "9780312577220\0"
.byte 0 0
.word 2424
.word 151912
.word 125
# empty or deleted entry starts here
.align 2
.byte 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
# empty or deleted entry starts here
.align 2
.byte 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
# empty or deleted entry starts here
.align 2
.byte 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
.end_type
.align 2
.word 7 6 68
# Book struct start
.align 2
.ascii "9780345501330\0"
.ascii "Fairy Tail, Vol. 1 (Fair\0"
.ascii "Hiro Mashima, William Fl\0"
.word 1
# empty or deleted entry starts here
.align 2
.byte 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
# Book struct start
.align 2
.ascii "9780060855900\0"
.ascii "Equal Rites (Discworld, \0"
.ascii "Terry Pratchett\0\0\0\0\0\0\0\0\0\0"
.word 103
# Book struct start
.align 2
.ascii "9780670032080\0"
.ascii "Financial Peace Revisite\0"
.ascii "Dave Ramsey\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
.word 61
# Book struct start
.align 2
.ascii "9780064408330\0"
.ascii "Joey Pigza Swallowed the\0"
.ascii "Jack Gantos\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
.word 44
# Book struct start
.align 2
.ascii "9780312577220\0"
.ascii "Fly Away (Firefly Lane, \0"
.ascii "Kristin Hannah\0\0\0\0\0\0\0\0\0\0\0"
.word 812
# Book struct start
.align 2
.ascii "9781416971700\0"
.ascii "Out of My Mind\0\0\0\0\0\0\0\0\0\0\0"
.ascii "Sharon M. Draper\0\0\0\0\0\0\0\0\0"
.word 1
.end_type
"9780679744400"
5123
"2029-11-04"
987

9781416971700
9780060855900
9780345501330

9780312577220



-2
-2

# the sales hash table is full
sell_book
.align 2
.word 9 9 28
# BookSale struct start
.align 2
.ascii "9780345501330\0"
.byte 0 0
.word 723341
.word 155229
.word 55
# BookSale struct start
.align 2
.ascii "9781416971700\0"
.byte 0 0
.word 2323432
.word 155033
.word 22
# BookSale struct start
.align 2
.ascii "9780060855900\0"
.byte 0 0
.word 920192
.word 158610
.word 61
# BookSale struct start
.align 2
.ascii "9780345501330\0"
.byte 0 0
.word 81321
.word 151269
.word 192
# BookSale struct start
.align 2
.ascii "9780312577220\0"
.byte 0 0
.word 777233
.word 155229
.word 55
# BookSale struct start
.align 2
.ascii "9780312577220\0"
.byte 0 0
.word 2424
.word 151912
.word 125
# BookSale struct start
.align 2
.ascii "9780345501330\0"
.byte 0 0
.word 26234
.word 155229
.word 55
# BookSale struct start
.align 2
.ascii "9780312577220\0"
.byte 0 0
.word 12312
.word 155229
.word 55
# BookSale struct start
.align 2
.ascii "9780064408330\0"
.byte 0 0
.word 73123
.word 155229
.word 55
.end_type
.align 2
.word 7 6 68
# Book struct start
.align 2
.ascii "9780345501330\0"
.ascii "Fairy Tail, Vol. 1 (Fair\0"
.ascii "Hiro Mashima, William Fl\0"
.word 3
# empty or deleted entry starts here
.align 2
.byte 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
# Book struct start
.align 2
.ascii "9780060855900\0"
.ascii "Equal Rites (Discworld, \0"
.ascii "Terry Pratchett\0\0\0\0\0\0\0\0\0\0"
.word 103
# Book struct start
.align 2
.ascii "9780670032080\0"
.ascii "Financial Peace Revisite\0"
.ascii "Dave Ramsey\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
.word 61
# Book struct start
.align 2
.ascii "9780064408330\0"
.ascii "Joey Pigza Swallowed the\0"
.ascii "Jack Gantos\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
.word 45
# Book struct start
.align 2
.ascii "9780312577220\0"
.ascii "Fly Away (Firefly Lane, \0"
.ascii "Kristin Hannah\0\0\0\0\0\0\0\0\0\0\0"
.word 814
# Book struct start
.align 2
.ascii "9781416971700\0"
.ascii "Out of My Mind\0\0\0\0\0\0\0\0\0\0\0"
.ascii "Sharon M. Draper\0\0\0\0\0\0\0\0\0"
.word 1
.end_type
"9781416971700"
1523
"2022-10-14"
323
9780345501330
9781416971700
9780060855900
9780345501330
9780312577220
9780312577220
9780345501330
9780312577220
9780064408330
-1
-1


############################ PART 12
############################ PART 12
############################ PART 12
# Test case #1
compute_scenario_revenue
# BookSale struct start
.align 2
.ascii "0000000000000\0"
.byte 0 0
.word 12345
.word 153789
.word 2
# BookSale struct start
.align 2
.ascii "1111111111111\0"
.byte 0 0
.word 52321
.word 153789
.word 4
# BookSale struct start
.align 2
.ascii "2222222222222\0"
.byte 0 0
.word 41231
.word 153789
.word 6
# BookSale struct start
.align 2
.ascii "3333333333333\0"
.byte 0 0
.word 12523
.word 153789
.word 2
# BookSale struct start
.align 2
.ascii "4444444444444\0"
.byte 0 0
.word 51231
.word 153789
.word 5
.end_type
5
12
64

# Test case #2
compute_scenario_revenue
# BookSale struct start
.align 2
.ascii "5688198170802\0"
.byte 0 0
.word 69170
.word 1836
.word 54
# BookSale struct start
.align 2
.ascii "8174611363470\0"
.byte 0 0
.word 42817
.word 1416
.word 472
# BookSale struct start
.align 2
.ascii "6771105776755\0"
.byte 0 0
.word 73451
.word 1537
.word 296
# BookSale struct start
.align 2
.ascii "9694257705423\0"
.byte 0 0
.word 89692
.word 1796
.word 348
# BookSale struct start
.align 2
.ascii "8148291072965\0"
.byte 0 0
.word 93505
.word 1860
.word 115
# BookSale struct start
.align 2
.ascii "1537177706509\0"
.byte 0 0
.word 25366
.word 1488
.word 433
# BookSale struct start
.align 2
.ascii "3918738489597\0"
.byte 0 0
.word 52178
.word 1247
.word 303
# BookSale struct start
.align 2
.ascii "1856189180494\0"
.byte 0 0
.word 69428
.word 1731
.word 118
# BookSale struct start
.align 2
.ascii "4206531586624\0"
.byte 0 0
.word 99857
.word 1083
.word 190
.end_type
9
205
12824



# Test case #3
compute_scenario_revenue
# BookSale struct start
.align 2
.ascii "0043444591466\0"
.byte 0 0
.word 56274
.word 1935
.word 12
# BookSale struct start
.align 2
.ascii "0912549927792\0"
.byte 0 0
.word 20150
.word 1615
.word 341
# BookSale struct start
.align 2
.ascii "8208666153502\0"
.byte 0 0
.word 13570
.word 1727
.word 275
# BookSale struct start
.align 2
.ascii "7891835066590\0"
.byte 0 0
.word 89612
.word 1679
.word 405
# BookSale struct start
.align 2
.ascii "7850924139905\0"
.byte 0 0
.word 56805
.word 1379
.word 227
# BookSale struct start
.align 2
.ascii "7172692040044\0"
.byte 0 0
.word 14473
.word 1609
.word 306
# BookSale struct start
.align 2
.ascii "8881948157382\0"
.byte 0 0
.word 35983
.word 1662
.word 38
# BookSale struct start
.align 2
.ascii "6319285981025\0"
.byte 0 0
.word 61086
.word 1664
.word 411
# BookSale struct start
.align 2
.ascii "5218182478429\0"
.byte 0 0
.word 34089
.word 1400
.word 484
# BookSale struct start
.align 2
.ascii "9545006833495\0"
.byte 0 0
.word 12400
.word 1382
.word 458
# BookSale struct start
.align 2
.ascii "6178171431772\0"
.byte 0 0
.word 40266
.word 1773
.word 330
.end_type
11
845
19581

# Test case #4
compute_scenario_revenue
# BookSale struct start
.align 2
.ascii "3318220944005\0"
.byte 0 0
.word 68169
.word 1310
.word 429
# BookSale struct start
.align 2
.ascii "1790274371133\0"
.byte 0 0
.word 12055
.word 1911
.word 67
# BookSale struct start
.align 2
.ascii "2323508691228\0"
.byte 0 0
.word 25027
.word 1950
.word 382
# BookSale struct start
.align 2
.ascii "6580406620516\0"
.byte 0 0
.word 14457
.word 1160
.word 390
# BookSale struct start
.align 2
.ascii "1220293838689\0"
.byte 0 0
.word 26212
.word 1181
.word 79
# BookSale struct start
.align 2
.ascii "8838065641525\0"
.byte 0 0
.word 38406
.word 1406
.word 239
# BookSale struct start
.align 2
.ascii "4140073652158\0"
.byte 0 0
.word 91560
.word 1707
.word 231
# BookSale struct start
.align 2
.ascii "0358003692171\0"
.byte 0 0
.word 97221
.word 1131
.word 492
# BookSale struct start
.align 2
.ascii "8102823570747\0"
.byte 0 0
.word 64311
.word 1671
.word 147
# BookSale struct start
.align 2
.ascii "2694841805861\0"
.byte 0 0
.word 81769
.word 1342
.word 380
# BookSale struct start
.align 2
.ascii "8985832671846\0"
.byte 0 0
.word 33475
.word 1157
.word 455
# BookSale struct start
.align 2
.ascii "9649316844603\0"
.byte 0 0
.word 74921
.word 1199
.word 446
# BookSale struct start
.align 2
.ascii "2768474273172\0"
.byte 0 0
.word 48218
.word 1291
.word 474
.end_type
13
6989
25886


.end_check